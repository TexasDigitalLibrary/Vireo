#{extends 'submitSteps.html' /}
#{set title:'Confirm & Submit' /}

<br />
<div class="row pageHead">
	<h3 class="span11">Confirm & Submit</h3>
</div>
<br />
<div id="confirmSubmit" class="row">
<form action="@{Submit.submitETD(subId)}" method="post" class="form-horizontal">
	<legend>About You</legend>
	<div class="control-group">
		<label class="control-label"><b>Name:</b></label>
		<div class="controls">
			<p>${submitter.lastName}, ${submitter.firstName}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Email:</b></label>
		<div class="controls">
			<p>${submitter.getEmail()}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Year of Birth:</b></label>
		<div class="controls">
			<p>${submitter.getBirthYear()}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Phone:</b></label>
		<div class="controls">
			<p>${submitter.getCurrentPhoneNumber()}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Address:</b></label>
		<div class="controls">
			<p>${submitter.getCurrentPostalAddress()}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"></label>
		<div class="controls">
			<p><a href="@{Submit.verifyPersonalInformation(subId)}">[edit your personal information]</a></p>
		</div>
	</div>
	
	<legend>Academic Affiliation</legend>
	<div class="control-group">
		<label class="control-label"><b>School:</b></label>
		<div class="controls">
			<p>Texas Digital Library</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Degree:</b></label>
		<div class="controls">
			<p>${submitter.getCurrentDegree()}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Major:</b></label>
		<div class="controls">
			<p>${submitter.getCurrentMajor()}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"></label>
		<div class="controls">
			<p><a href="@{Submit.verifyPersonalInformation(subId)}">[edit your personal information]</a></p>
		</div>
	</div>
	
	<legend>Document Information</legend>
	<div class="control-group">
		<label class="control-label"><b>Title:</b></label>
		<div class="controls">
			<p>${sub.getDocumentTitle()}</p>
		</div>
	</div>
		
	<div class="control-group">
		<label class="control-label"><b>Degree Date:</b></label>
		<div class="controls">
		    #{if sub.getGraduationMonth() != null}
				<p>${controllers.Submit.getMonth(sub.getGraduationMonth())} ${sub.getGraduationYear()}</p>
			#{/if}
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Document Type:</b></label>
		<div class="controls">
			<p>${sub.getDocumentType()}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Keywords:</b></label>
		<div class="controls">
			<p>${sub.getDocumentKeywords()}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Abstract:</b></label>
		<div class="controls">
			<p>${sub.getDocumentAbstract()}</p>
		</div>
	</div>
	
    #{list items:sub.committeeMembers, as:"member"}	

	<div class="control-group">
		<label class="control-label"><b>Committee Member:</b></label>
		<div class="controls">
			<p>${member.getFirstName()} ${member.getMiddleName()} ${member.getLastName()}</p>
		</div>
	</div>	
	
	#{/list}
	
	<div class="control-group">
		<label class="control-label"><b>Chair Email Address:</b></label>
		<div class="controls">
			<p>${sub.getCommitteeContactEmail()}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"><b>Embargo:</b></label>
		<div class="controls">
			#{if sub.getEmbargoType() != null}
				<p>${sub.getEmbargoType().getDescription()}</p>
			#{/if}
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"></label>
		<div class="controls">
			<p><a href="@{Submit.docInfo(subId)}">[edit your document information]</a></p>
		</div>
	</div>
	
	<legend>Uploaded File</legend>
	<div class="control-group">
		<label class="control-label"><b>Primary Document:</b></label>
		<div class="controls">
		    #{if sub.getPrimaryDocument() != null}
			    <p>${sub.getPrimaryDocument().getName()} ${sub.getPrimaryDocument().getDisplaySize()}</p>
			#{/if}
		</div>			   

                #{if supplementalAttachments.size() > 0}
                
				<table class="span11 table-striped table-bordered">
					<thead>
						<tr>
							<td>Name</td>
							<td>size</td>
						</tr>
					</thead>
	                <tbody>
	                        #{list items:supplementalAttachments, as:"attachment"}
	                            <tr>
	                            <label>
	                                <td>${attachment.getName()}</td> <td>${attachment.getDisplaySize()} </td> 
	                            </label>                                                     
	                            </tr>
	                        #{/list}
					</tbody>
		        </table>	
		    #{/if}	
	</div>
	
	<div class="control-group">
		<label class="control-label"></label>
		<div class="controls">
			<p><a href="@{Submit.fileUpload(subId)}">[edit your uploaded files]</a></p>
		</div>
	</div>
	
	<legend>Final Submission</legend>
	<p>Please verify all the information displayed below before proceeding. Once you click the button to approve this document, you cannot make any more changes to the form's data without contacting your local thesis office.</p>
	<div class="span11 center"><input type="submit" value="Submit" class="btn btn-primary"></div>
	
</form>
<br />
<div>
	<legend>Application Activity</legend>
	<br />
	<table class="span11 table-striped table-bordered">
		<thead>
			<tr>
				<td>Name</td>
				<td>Action</td>
				<td>Time</td>
			</tr>
		</thead>
                <tbody>
                    #{list items:actionLogList, as:'log'}
                    <tr>
                        #{if null != log.getPerson() }
                            <td> ${log.getPerson().getFullName()} </td>
                        #{/if}
                        <td> ${log.getEntry()}  </td>
                        <td> ${log.getActionDate().format('dd MMMM yyyy hh:mm')} </td>	    
                    </tr>
                    #{/list}				
                </tbody>
	</table>
</div>

</div>