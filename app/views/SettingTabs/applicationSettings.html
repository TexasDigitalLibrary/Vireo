#{extends 'SettingTabs/settings.html' /}
#{set 'moreSettingScripts' }
<script type="text/javascript">
jQuery(document).ready(function(){

	// Settings toggle and input/textarea fields
     jQuery(".application-toggle").click(applicationSettingsHandler('@{settings.ApplicationSettingsTab.updateApplicationSettingsJSON()}'));
     jQuery(".application-text").change(applicationSettingsHandler('@{settings.ApplicationSettingsTab.updateApplicationSettingsJSON()}'));
    
     // Sortable action list
     jQuery("#action-list, #action-remove").sortable({
         connectWith: ".action-sortable",
         placeholder: "placeholder",
         update: updateSortableHandler(
        		 '@{settings.ApplicationSettingsTab.reorderCustomActionsJSON()}',
        		 '@{settings.ApplicationSettingsTab.removeCustomActionJSON()}'
        		 )
     }).disableSelection();
    
     
     jQuery("#add-action-link").click(fadeInHandler("#add-action-dialog"));
     
     jQuery("#add-action-save").click(saveAddActionHandler('@{settings.ApplicationSettingsTab.addCustomActionJSON()}'));
     
     jQuery("#add-action-cancel").click(cancelAddActionHandler());
     
}) // document ready
</script>
#{/set}

<h2>SUBMISSION AVAILABILITY</h2>

<div class="submissionAvailability pull-left wrap">
	<ul class="unstyled">
		<li>
			<label>Submissions are currently:</label>
			<span>
			    <div class="btn-group" data-toggle="buttons-radio">
					<button name="${org.tdl.vireo.model.Configuration.SUBMISSIONS_OPEN}" class="btn application-toggle #{if SUBMISSIONS_OPEN}active#{/if}" value="true">Open</button>
					<button name="${org.tdl.vireo.model.Configuration.SUBMISSIONS_OPEN}" class="btn application-toggle #{if !SUBMISSIONS_OPEN}active#{/if}">Closed</button>
				</div>
			</span>
			<div class="clear"></div>
		</li>
		<li>
			<label>Current submission semester:</label>
			<span>
			     <input name="${org.tdl.vireo.model.Configuration.CURRENT_SEMESTER}" class="application-text" type="text" value="${CURRENT_SEMESTER}" />
			     <div class="info">'Month Year' (i.e. May ${ new Date().getYear() + 1900})</div>
			</span>
			<div class="clear"></div>
		</li>
		<li>
			<label>Allow multiple submissions:</label>
			<span>
                <div class="btn-group" data-toggle="buttons-radio">
                    <button name="${org.tdl.vireo.model.Configuration.ALLOW_MULTIPLE_SUBMISSIONS}" class="btn application-toggle #{if ALLOW_MULTIPLE_SUBMISSIONS}active#{/if}" value="true">Yes</button>
                    <button name="${org.tdl.vireo.model.Configuration.ALLOW_MULTIPLE_SUBMISSIONS}" class="btn application-toggle #{if !ALLOW_MULTIPLE_SUBMISSIONS}active#{/if}">No</button>
                </div>
            </span>
			<div class="clear"></div>
		</li>
		<li>
			<label>Request "College" parameter:</label>
			<span>
			     <div class="btn-group" data-toggle="buttons-radio">
                    <button name="${org.tdl.vireo.model.Configuration.REQUEST_COLLEGE}" class="btn application-toggle #{if REQUEST_COLLEGE}active#{/if}" value="true">Yes</button>
                    <button name="${org.tdl.vireo.model.Configuration.REQUEST_COLLEGE}" class="btn application-toggle #{if !REQUEST_COLLEGE}active#{/if}">No</button>
                </div>
			</span>
			<div class="clear"></div>
		</li>
		<li>
			<label>Offer UMI release option:</label>
			<span>
			     <div class="btn-group" data-toggle="buttons-radio">
                    <button name="${org.tdl.vireo.model.Configuration.REQUEST_UMI}" class="btn application-toggle #{if REQUEST_UMI}active#{/if}" value="true">Yes</button>
                    <button name="${org.tdl.vireo.model.Configuration.REQUEST_UMI}" class="btn application-toggle #{if !REQUEST_UMI}active#{/if}">No</button>
                </div>
			</span>     
			<div class="clear"></div>
		</li>
	</ul>
</div>
<div class="clear"></div>

<h2>SUBMISSION INSTRUCTIONS</h2>

<div class="wrap">
    <div class="span7">
	<textarea rows="7" class="span7 application-text" name="${org.tdl.vireo.model.Configuration.SUBMISSION_INSTRUCTIONS}">#{verbatim}${SUBMISSION_INSTRUCTIONS}#{/verbatim}</textarea>
	<p class="info">These instructions will be shown as part of the submission confirmation. The following HTML tags are allowed: h1 - h5, p, a, b, i, u, ol, li, img. Newlines are converted to paragraphs automatically.</p>
	</div>
	<div class="clear"></div>
</div>

<h2>CUSTOM ACTIONS CHECKLIST</h2>

<div class="wrap">
<div class="row">
<div class="span4">
<ol id="action-list" class="action-sortable">
	#{list items:actions, as:'action'}
	   <li id="action_${action.getId()}">${action.getLabel()}</li>	
	#{/list}
</ol>
</div>
<div class="span3">
<ul id="action-remove" class="action-sortable" #{if actions.size() == 0}style="display: none;"#{/if}>
<p class="info"><em class="icon-trash"></em> Remove items by dragging them to the trash can</p>
</ul>
</div>
</div>

<a id="add-action-link" href="#">[ADD NEW]</a>

<div class="row">
<div id="add-action-dialog" class="span3" style="display: none;">
    <form class="form-horizontal">
        <fieldset>
            <div class="control-group">
                <label class="control-label" for="add-action-label">New Action</label>
                <div class="controls">
                    <input type="text" class="input-large" id="add-action-label"/>
                    <p class="help-block">Label of the new custom action</p>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
	                <button id="add-action-save" class="btn btn-primary">Add Action</button>
	                <button id="add-action-cancel" class="btn">Cancel</button>
	            </div>
            </div>
        </fieldset>
    </form>
</div>
</div>
</div>

<h2>WHO HAS ACCESS?</h2>

<table class="table table-striped table-bordered table-condensed">
	<thead>
		<tr>
			<td>Remove</td>
			<td>Name</td>
			<td>Email</td>
			<td>Manager</td>			
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><input type="checkbox" class="checkbox" /></td>
			<td>Gillian Anderson</td>
			<td>ganderson@gmail.com</td>
			<td><a href="#" class="manager">&nbsp;</a></td>
		</tr>
		<tr>
			<td><input type="checkbox" class="checkbox" /></td>
			<td>Claire Danes</td>
			<td>cdanes@gmail.com</td>
			<td><a href="#" class="manager">&nbsp;</a></td>
		</tr>
		<tr>
			<td class="comments tr" colspan="4"><button class="btn btn-small">Add Member</button></td>
		</tr>
	</tbody>
</table>