#{extends 'admin.html' /}

<div id="left-column" class="pull-left">

	<div class="side-box">
		<div class="box-head expanded">
			<div class="expand">[-]</div>
			<div class="main-heading">Active Document</div>
		</div>
		<div class="box-body">
			#{if submission.getPrimaryDocument()}
				<img class="pull-left" src="../public/images/pdf-logo.gif" />
				<p>${submission.getPrimaryDocument().getName()}<br />
				<a href="${submission.getPrimaryDocument().getFile()}"><b>Download</b></a></p>
				<div class="clear"></div>
			#{/if}#{else}
				<p>none</p>
			#{/else}
			
			<div class="sub-heading">FILE OPTIONS</div>
			<ul class="unstyled">
				#{if submission.getAttachments()}
				<li>View All Files</li>
				#{/if}
				<li>Upload New File</li>
			</ul>
		</div>
		<div class="box-footer">
		
		</div>		
	</div>
	
	<div class="side-box">
		<div class="box-head expanded">
			<div class="expand">[-]</div>
			<div class="main-heading">Submission Status</div>
		</div>
		<div class="box-body">
			<p>
			<button class="btn btn-info">${submission.getState().getDisplayName()}</button>
			</p>
			<ul class="unstyled">
				<li>Assigned To:</li>
				<li><b>
				#{if submission.getAssignee()}
					${submission.getAssignee().getDisplayName()}
				#{/if}#{else}
					Unassigned
				#{/else}
				</b></li>
			</ul>
			<ul class="unstyled">
				<li>Last Action:</li>
				<li><b>${actionLogs[0].getActionDate()?.format("MM/dd/yyyy hh:mm:ss")}</b></li>
			</ul>
			<ul class="unstyled">
				<li>What:</li>
				<li><b>${actionLogs[0].getEntry().substring(0, Math.min(actionLogs[0].getEntry().length(), 50))}#{if actionLogs[0].getEntry().length() > 50}...#{/if}</b></li>
			</ul>
			<ul class="unstyled">
				<li>UMI Release:</li>
				<li><b>${submission.getUMIRelease()}</b></li>
			</ul>
		</div>
		<div class="box-footer">
		
		</div>		
	</div>
	
	<div class="side-box">
		<div class="box-head expanded">
			<div class="expand">[-]</div>
			<div class="main-heading">Custom Actions</div>
		</div>
		<div class="box-body">
			<p>
			<input type="checkbox" class="checkbox"> Passed their classes</input>
			</p>
			
		</div>
		<div class="box-footer">
		
		</div>		
	</div>	
		
</div>

<div id="right-column">
	<div class="inner">
		<h1>${submission.getStudentLastName()}, ${submission.getStudentFirstName()} (${submission.getMajor()} - ${submission.getDegree()})</h1>
		
		<div class="edit-holder pull-left">
			<ul class="nav nav-tabs">
				<li class="active"><a class="personalInfo" href="#">Personal Info</a></li>
				<li><a class="docInfo" href="#">Document Info</a></li>
				<li><a class="degreeInfo" href="#">Degree Info</a></li>
			</ul>
			<div id="personalInfo" class="edit-box-holder">
			<div class="edit-box pull-left">
				<ul class="unstyled">
					<li><label>First Name:</label><span id="firstName"
						#{if submission.getStudentFirstName()}
							>${submission.getStudentFirstName()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Middle Name:</label><span id="middleName"
						#{if submission.getStudentMiddleName()}
							>${submission.getStudentMiddleName()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>							
					<li><label>Last Name:</label><span id="lastName"
						#{if submission.getStudentLastName()}
							>${submission.getStudentLastName()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Email:</label><span id="email"
						#{if submitter.getEmail()}
							>${submitter.getEmail()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Year of Birth:</label><span id="birthYear"
						#{if submission.getStudentBirthYear()}
							>${submission.getStudentBirthYear()}
						#{/if}#{else}
							class="empty">none
						#{/else}
					</span></li>
				</ul>
			</div>
			<div class="edit-box pull-left">
				<ul class="unstyled">
					<li><label>Permanent Phone:</label><span id="permPhone"
						#{if submitter.getPermanentPhoneNumber()}
							>${submitter.getPermanentPhoneNumber()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Permanent Email:</label><span id="permEmail"
						#{if submitter.getPermanentEmailAddress()}
							>${submitter.getPermanentEmailAddress()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Permanent Address:</label><span id="permAddress"
						#{if submitter.getPermanentPostalAddress()}
							class="textarea">${submitter.getPermanentPostalAddress()}
						#{/if}#{else}
							class="textarea empty">none
						#{/else}
						</span></li>
					<li><label>Current Phone:</label><span id="currentPhone"
						#{if submitter.getCurrentPhoneNumber()}
							>${submitter.getCurrentPhoneNumber()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Current Address:</label><span id="currentAddress"
						#{if submitter.getCurrentPostalAddress()}
							class="textarea">${submitter.getCurrentPostalAddress()}
						#{/if}#{else}
							class="textarea empty">none
						#{/else}
					</span></li>
				</ul>
			</div>
			<div class="clear"></div>
			</div>
			
			<div id="docInfo" class="edit-box-holder hidden">
			<div class="edit-box pull-left">
				<ul class="unstyled">
					<li><label>Title:</label><span id="title"
						#{if submission.getDocumentTitle()}
							>${submission.getDocumentTitle()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Embargo:</label><span id="embargo"
						#{if submission.getEmbargoType()}
							class="select">${submission.getEmbargoType().getName()}
						#{/if}#{else}
							class="select empty">none
						#{/else}
						</span></li>
					<li><label>UMI Release:</label><span id="umiRelease"
						#{if submission.getUMIRelease() != null}
							>${submission.getUMIRelease()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Document Type:</label><span id="docType"
						#{if submission.getDocumentType()}
							class="select">${submission.getDocumentType()}
						#{/if}#{else}
							class="select empty">none
						#{/else}
						</span></li>
					<li><label>Keywords:</label><span id="keywords"
						#{if submission.getDocumentKeywords()}
							class="textarea">${submission.getDocumentKeywords()}
						#{/if}#{else}
							class="textarea empty">none
						#{/else}
					</span></li>
				</ul>
			</div>
			<div class="edit-box pull-left">
				<ul class="unstyled">
					<li><label>Abstract:</label><span id="abstract"
						#{if submission.getDocumentAbstract()}
							class="textarea">${submission.getDocumentAbstract()}
						#{/if}#{else}
							class="textarea empty">none
						#{/else}
					</span></li>
				</ul>
			</div>
			<div class="clear"></div>
			</div>
			
			<div id="degreeInfo" class="edit-box-holder hidden">
			<div class="edit-box pull-left">
				<ul class="unstyled">
					<li><label>School:</label><span id="school"
						#{if submission.getCollege()}
							>${submission.getCollege()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Department:</label><span id="department"
						#{if submission.getDepartment()}
							class="select">${submission.getDepartment()}
						#{/if}#{else}
							class="select empty">none
						#{/else}
						</span></li>
					<li><label>Degree:</label><span id="degree"
						#{if submission.getDegree()}
							class="select">${submission.getDegree()}
						#{/if}#{else}
							class="select empty">none
						#{/else}
						</span></li>
					<li><label>Degree Level:</label><span id="degreeLevel"
						#{if submission.getDegree()}
							class="select">${degreeLevel}
						#{/if}#{else}
							class="select empty">none
						#{/else}
						</span></li>
					<li><label>Major:</label><span id="major"
						#{if submission.getMajor()}
							>${submission.getMajor()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Graduation Semester:</label><span id="gradSemester"
						#{if submission.getGraduationMonth() && submission.getGraduationYear()}
							>${gradMonth} ${submission.getGraduationYear()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label>Advisor Email:</label><span id="advisorEmail"
						#{if submission.getCommitteeContactEmail()}
							>${submission.getCommitteeContactEmail()}
						#{/if}#{else}
							class="empty">none
						#{/else}
						</span></li>
					<li><label></label><span><button class="btn">Send Advisor Approval Email</button></span></li>
				</ul>				
			</div>
			<div class="edit-box pull-left">				
				<ul class="unstyled">
					<li><label><h4>Committee Members</h4></label><span></span></li>
					#{if submission.getCommitteeMembers()}
					#{list items:submission.getCommitteeMembers(), as:'value'}
						<li><label>${value.getLastName()}, ${value.getFirstName()}</label><input type="checkbox" class="checkbox" 
							#{if value.isCommitteeChair()}checked="checked"#{/if}
						> Chair</input></li>
					#{/list}
					<li><label></label><span><button class="btn">Update Committee Members</button></span></li>
					#{/if}#{else}
					<li class="empty">none</li>
					#{/else}
				</ul>				
			</div>
			<div class="clear"></div>
			</div>
			
			<!-- Hidden Select Options -->
			<div id="embargoTypeOptions" style="display:none;">
				#{list items:embargos, as:'embargo'}
					<option value="${embargo.getId()}">${embargo.getName()}</option>
				#{/list}
			</div>
			
		</div>
		
		<h2>ACTION LOG</h2>
		<table class="table table-striped table-bordered table-condensed">
			<thead>
				<tr>
					<td>Action by</td>
					<td>Action / Comment</td>
					<td>Time</td>
				</tr>
			</thead>
			<tbody>
				#{list items:0..4, as:'value'}
					#{if actionLogs[value]}
					<tr>
						<td>${actionLogs[value].getPerson().getFirstName()} ${actionLogs[value].getPerson().getLastName()}</td>
						<td>${actionLogs[value].getEntry()}</td>
						<td>${actionLogs[value].getActionDate()?.format("MM/dd/yyyy hh:mm:ss")}</td>
					</tr>
					#{/if}
				#{/list}				
				<tr>
					<td class="comments"><a href="@{FilterTab.log()}"><b>[more...]</b></a></td>
					<td class="comments tr" colspan="2"><button class="btn btn-small">Add Comment</button></td>
				</tr>
			</tbody>
		</table>
		
		<h2>ALL FILES</h2>
		<table class="table table-striped table-bordered table-condensed">
			<thead>
				<tr>
					<td>Name</td>
					<td>File</td>
					<td>Type</td>
					<td>Time</td>
				</tr>
			</thead>
			<tbody>
				#{list items:submission.getAttachments(), as:'attachment'}
					<tr>
						<td></td>
						<td><a href="${attachment.getFile()}">${attachment.getName()}</a> (${attachment.getDisplaySize()})</td>
						<td>${attachment.getType()}</td>
						<td></td>
					</tr>
				#{/list}				
				<tr>
					<td colspan="4" class="comments tr"><button class="btn btn-small">Add File</button></td>
				</tr>
			</tbody>
		</table>
	</div>
</div>