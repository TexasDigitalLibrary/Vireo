<div class="panel panel-default">
	<div class="panel-heading">
		<h3 class="panel-title">Manage {{getSelectedOrganization().name}}</h3>
	</div>

	<div class="panel-body">

		<alerts seconds="45" channels="organization/update" types="SUCCESS"></alerts>

		<form ng-submit="updateOrganization(getSelectedOrganization())" name="forms.update" novalidate>

				<validationmessage results="getSelectedOrganization().getValidationResults()"></validationmessage>

				<div class="col-md-12">
					<div class="row">
						<div class="col-xs-6">

							<validatedinput
								label="Name"
								model="getSelectedOrganization()"
								property="name"
								placeholder="Name of the organization"
								form="forms.update"
								validations="getSelectedOrganization().getValidations()"
								results="getSelectedOrganization().getValidationResults()">
							</validatedinput>

							<validatedselect
								label="Category"
								options="organizationCategories"
								optionproperty="name"
								model="getSelectedOrganization()"
								property="category"
								form="forms.update"
								validations="getSelectedOrganization().getValidations()"
								results="getSelectedOrganization().getValidationResults()">
							</validatedselect>

							<toggleButton
								label="Organization accepts Submissions?"
								scope-value="organizationRepo.getSelectedOrganization().acceptsSubmissions"
								toggle-options="{{acceptsSubmissions}}">
							</toggleButton>

						</div>

						<div class="col-xs-6">

							<validatedinput
								label="Email Contact"
								model="getSelectedOrganization()"
								property="emails"
								placeholder="Email Address"
								form="forms.update"
								validations="getSelectedOrganization().getValidations()"
								results="getSelectedOrganization().getValidationResults()"
								repeatable="true">
							</validatedinput>

						</div>
					</div>

					<hr />

					<div class="row">
						<div class="pull-right">
							<button
							  ng-if="getSelectedOrganization().id !== 1"
								type="button"
								class="btn btn-danger"
                ng-click="openModal('#organizationConfirmDeleteModal')">Delete Organization</button>
							<button
								type="button"
								class="btn btn-default"
								ng-click="resetManageOrganization()"
								ng-disabled="updatingOrganization">Cancel</button>
							<button
								type="submit"
								class="btn btn-primary"
								ng-disabled="forms.update.$invalid || updatingOrganization">Save 
								<span ng-if="updatingOrganization" class="glyphicon glyphicon-refresh spinning"></span>
							</button>
						</div>
					</div>

				</div>

		</form>

		<modal modal-id="organizationConfirmDeleteModal"
			modal-view="views/modals/organization/organizationConfirmDeleteModal.html"
			modal-header-class="modal-header-danger"
			wvr-modal-backdrop="static">
		</modal>

	</div>

</div>
