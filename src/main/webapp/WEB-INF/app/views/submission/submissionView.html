<div class="container">
  <div class="submission-view-container">
    <div class="submission-view-top">
      <ul class="breadcrumb">
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/submission/history">Submissions</a>
        </li>
        <li class="active">View</li>
      </ul>
      <h1>Submission View</h1>
      <submissiondialog submission="submission" type="actions"></submissiondialog>
      <div class="student-submission-loader" ng-class="{'ready': loaded}">
        <img src="resources/images/ajax-loader.gif"/>
      </div>
      <reviewsubmissionsfields submission="submission" hide-links="true" ng-if="loaded"></reviewsubmissionsfields>

      <div class="row" ng-if="loaded && submission.submissionState.name == 'Needs Correction'">
        <span class="text-danger">
          <h3>Upload Files</h3>
          <hr class="submission-view-upload-files-hr"/>
        </span>
        <div class="col-md-8 col-md-offset-2">
          <form class="form-horizontal">
            <div class="form-group">
              <label class="control-label col-sm-3" for="manuscript">Manuscript in PDF:</label>
              <div class="col-sm-6">
                <span></span>
              </div>
              <div class="col-sm-2">
                <button class="btn btn-default" type="button" ng-click="replaceManuscript()" ng-disabled="replacingManiuscript">Replace Manuscript
                  <span ng-if="replacingManiuscript" class="glyphicon glyphicon-refresh spinning"></span>
                </button>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3" for="manuscript">Additional Documents:</label>
              <div class="col-sm-6">
                <span>
                  <i>No additional documents uploaded</i>
                </span>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3" for="manuscript">Browse for Additional Document:</label>
              <div class="col-sm-6">
                <span></span>
              </div>
              <div class="col-sm-2"></div>
            </div>
          </form>
        </div>
      </div>

      <div class="row" ng-show="loaded">
        <h3>Application Activity</h3>
        <hr/>
        <div class="col-md-8 col-md-offset-2">
          <table class="table table-bordered table-striped table-hover action-log-table">
            <thead>
              <tr>
                <th>Action By</th>
                <th>Action / Comment</th>
                <th>Time</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="actionLog in submission.actionLogs | orderBy:'-' | limitTo:actionLogCurrentLimit | filter: {privateFlag: 'false'}" ng-class="{'danger': actionLog.privateFlag}">
                <td>{{actionLog.user.settings.displayName}}</td>
                <td>{{actionLog.entry}}
                  <spam class="private-flag" ng-if="actionLog.privateFlag">[private]</spam>
                </td>
                <td>{{actionLog.actionDate | date:'MMM dd, yyyy HH:mm'}}</td>
              </tr>
            </tbody>
            <tfoot ng-if="submission.actionLogs.length>actionLogLimit">
              <tr>
                <td ng-click="updateActionLogLimit()">
                  <span class="action-log-more-less" ng-if="actionLogCurrentLimit===actionLogLimit">[more]</span>
                  <span class="action-log-more-less" ng-if="actionLogCurrentLimit!==actionLogLimit">[less]</span>
                </td>
                <td></td>
                <td></td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>

      <div class="row" ng-show="loaded">
        <h3>Application Activity</h3>
        <hr/>
        <div class="col-md-8 col-md-offset-2">
          <form class="form-horizontal">
            <div class="form-group">
              <label class="control-label col-sm-2" for="comment">Message:</label>
              <div class="col-sm-8">
                <textarea class="submission-view-message-textarea" rows="10" ng-model="message" ng-disabled="messaging"></textarea>
              </div>
              <div class="col-sm-2">
                <button class="btn btn-default submission-view-message-button" type="button" ng-click="addMessage()" ng-disabled="messaging">Add Message
                  <span ng-if="messaging" class="glyphicon glyphicon-refresh spinning"></span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>

    </div>

    <div class="submission-view-bottom">
      <submissiondialog submission="submission" type="state"></submissiondialog>
    </div>
  </div>
</div>
