<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Vireo: org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="vireo-logo-sm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Vireo
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
   <div id="projectbrief">Vireo Electronic Thesis and Dissertation Submission System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job__inherit__graph.png" border="0" usemap="#org_8tdl_8vireo_8export_8impl_8_deposit_service_impl_8_deposit_job_inherit__map" alt="Inheritance graph"/></div>
<map name="org_8tdl_8vireo_8export_8impl_8_deposit_service_impl_8_deposit_job_inherit__map" id="org_8tdl_8vireo_8export_8impl_8_deposit_service_impl_8_deposit_job_inherit__map">
</map>
</div>
<div class="dynheader">
Collaboration diagram for org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job__coll__graph.png" border="0" usemap="#org_8tdl_8vireo_8export_8impl_8_deposit_service_impl_8_deposit_job_coll__map" alt="Collaboration graph"/></div>
<map name="org_8tdl_8vireo_8export_8impl_8_deposit_service_impl_8_deposit_job_coll__map" id="org_8tdl_8vireo_8export_8impl_8_deposit_service_impl_8_deposit_job_coll__map">
<area shape="rect" id="node3" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html" title="{org.tdl.vireo.model.Submission\n||+ getSubmitter()\l+ getStudentFirstName()\l+ setStudentFirstName()\l+ getStudentLastName()\l+ setStudentLastName()\l+ getStudentMiddleName()\l+ setStudentMiddleName()\l+ getStudentBirthYear()\l+ setStudentBirthYear()\l+ getOrcid()\l+ setOrcid()\l+ getStudentFormattedName()\l+ getDocumentTitle()\l+ setDocumentTitle()\l+ getDocumentAbstract()\l+ setDocumentAbstract()\l+ getDocumentKeywords()\l+ setDocumentKeywords()\l+ getDocumentSubjects()\l+ addDocumentSubject()\l+ removeDocumentSubject()\l+ setDocumentLanguage()\l+ getDocumentLanguage()\l+ getDocumentLanguageLocale()\l+ setPublishedMaterial()\l+ getPublishedMaterial()\l+ getEmbargoTypes()\l+ addEmbargoType()\l+ removeEmbargoType()\l+ getEmbargoTypeByGuarantor()\l+ getPrimaryDocument()\l+ getSupplementalDocuments()\l+ getAttachments()\l+ getAttachmentsByType()\l+ addAttachment()\l+ addAttachment()\l+ findAttachmentById()\l+ findAttachmentByName()\l+ getCommitteeMembers()\l+ addCommitteeMember()\l+ getCommitteeContactEmail()\l+ setCommitteeContactEmail()\l+ getCommitteeEmailHash()\l+ setCommitteeEmailHash()\l+ getCommitteeApprovalDate()\l+ setCommitteeApprovalDate()\l+ getCommitteeEmbargoApprovalDate()\l+ setCommitteeEmbargoApprovalDate()\l+ getSubmissionDate()\l+ setSubmissionDate()\l+ getApprovalDate()\l+ setApprovalDate()\l+ getLicenseAgreementDate()\l+ setLicenseAgreementDate()\l+ getDefenseDate()\l+ setDefenseDate()\l+ getDegree()\l+ setDegree()\l+ getDegreeLevel()\l+ setDegreeLevel()\l+ getDepartment()\l+ setDepartment()\l+ getDepartmentId()\l+ setDepartmentId()\l+ getCollege()\l+ setCollege()\l+ getCollegeId()\l+ setCollegeId()\l+ getProgram()\l+ setProgram()\l+ getProgramId()\l+ setProgramId()\l+ getMajor()\l+ setMajor()\l+ getDocumentType()\l+ setDocumentType()\l+ getGraduationYear()\l+ setGraduationYear()\l+ getGraduationMonth()\l+ setGraduationMonth()\l+ getState()\l+ setState()\l+ getAssignee()\l+ setAssignee()\l+ getUMIRelease()\l+ setUMIRelease()\l+ getCustomActions()\l+ getCustomAction()\l+ addCustomAction()\l+ getDepositId()\l+ setDepositId()\l+ getDepositDate()\l+ setDepositDate()\l+ getReviewerNotes()\l+ setReviewerNotes()\l+ getLastLogEntry()\l+ getLastLogDate()\l+ logAction()\l}" alt="" coords="5,353,259,1853"/><area shape="rect" id="node4" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_abstract_model.html" title="{org.tdl.vireo.model.Abstract\lModel\n||+ getId()\l+ save()\l+ delete()\l+ refresh()\l+ merge()\l+ detach()\l}" alt="" coords="97,5,279,171"/><area shape="rect" id="node8" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_abstract_ordered_model.html" title="{org.tdl.vireo.model.Abstract\lOrderedModel\n||+ getDisplayOrder()\l+ setDisplayOrder()\l}" alt="" coords="191,221,373,328"/><area shape="rect" id="node5" href="interfaceorg_1_1tdl_1_1vireo_1_1job_1_1_job_metadata.html" title="{org.tdl.vireo.job.JobMetadata\n||+ getId()\l+ getStartTime()\l+ getOwnerId()\l+ getName()\l+ getStatus()\l+ setStatus()\l+ getProgress()\l+ getJob()\l+ setJob()\l+ getMessage()\l+ setMessage()\l}" alt="" coords="417,1936,607,2160"/><area shape="rect" id="node6" href="interfaceorg_1_1tdl_1_1vireo_1_1state_1_1_state.html" title="{org.tdl.vireo.state.State\n||+ getBeanName()\l+ getDisplayName()\l+ isInProgress()\l+ isActive()\l+ isArchived()\l+ isEditableByStudent()\l+ isEditableByReviewer()\l+ isDeletable()\l+ isDepositable()\l+ isApproved()\l+ getTransitions()\l+ isInWorkflow()\l}" alt="" coords="632,1929,803,2167"/><area shape="rect" id="node7" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_deposit_location.html" title="{org.tdl.vireo.model.Deposit\lLocation\n|+ DEFAULT_TIMEOUT\l|+ getName()\l+ setName()\l+ getRepository()\l+ setRepository()\l+ getCollection()\l+ setCollection()\l+ getUsername()\l+ setUsername()\l+ getPassword()\l+ setPassword()\l+ getOnBehalfOf()\l+ setOnBehalfOf()\l+ getPackager()\l+ setPackager()\l+ getDepositor()\l+ setDepositor()\l+ setTimeout()\l+ getTimeout()\l}" alt="" coords="213,1877,392,2219"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a132ad931d52e8b70b6dbd8fd80bd8769"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a132ad931d52e8b70b6dbd8fd80bd8769">DepositJob</a> (<a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_deposit_location.html">DepositLocation</a> <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#aa05597ab3df76aaed0c0e8c77c1d3939">location</a>, <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a> <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a1cae55310db896b85dd934cbf36647b4">submission</a>, <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1state_1_1_state.html">State</a> <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a17e35024bc28c083e5e9bd896070e376">successState</a>, boolean <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">runInThread</a>)</td></tr>
<tr class="separator:a132ad931d52e8b70b6dbd8fd80bd8769"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89543ed8a802de2cea85cb47c76ce8b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a89543ed8a802de2cea85cb47c76ce8b0">doJob</a> ()</td></tr>
<tr class="separator:a89543ed8a802de2cea85cb47c76ce8b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab467c113a6459c595c01c931853ef372"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#ab467c113a6459c595c01c931853ef372">depositSubmission</a> (<a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a> <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a1cae55310db896b85dd934cbf36647b4">submission</a>)</td></tr>
<tr class="separator:ab467c113a6459c595c01c931853ef372"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aa05597ab3df76aaed0c0e8c77c1d3939"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_deposit_location.html">DepositLocation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#aa05597ab3df76aaed0c0e8c77c1d3939">location</a></td></tr>
<tr class="separator:aa05597ab3df76aaed0c0e8c77c1d3939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cae55310db896b85dd934cbf36647b4"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a1cae55310db896b85dd934cbf36647b4">submission</a></td></tr>
<tr class="separator:a1cae55310db896b85dd934cbf36647b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17e35024bc28c083e5e9bd896070e376"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1state_1_1_state.html">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a17e35024bc28c083e5e9bd896070e376">successState</a></td></tr>
<tr class="separator:a17e35024bc28c083e5e9bd896070e376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a42316f761fb532791a0b1f555ae43"><td class="memItemLeft" align="right" valign="top">final boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">runInThread</a></td></tr>
<tr class="separator:a84a42316f761fb532791a0b1f555ae43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f9ae4e69d75e1693571220495055c9"><td class="memItemLeft" align="right" valign="top">final Long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a66f9ae4e69d75e1693571220495055c9">personId</a></td></tr>
<tr class="separator:a66f9ae4e69d75e1693571220495055c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a652a81b83bce81f00e3a149084a022a5"><td class="memItemLeft" align="right" valign="top">final boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a652a81b83bce81f00e3a149084a022a5">ignoreAuthorizations</a></td></tr>
<tr class="separator:a652a81b83bce81f00e3a149084a022a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d984fedab46e361b6953def78774e9a"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1job_1_1_job_metadata.html">JobMetadata</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a></td></tr>
<tr class="separator:a5d984fedab46e361b6953def78774e9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Background job to drive the submission process. It will:</p>
<p>1) Generate a package for the submission(s)</p>
<p>2) Deposit the submission, one at a time if multiple.</p>
<p>3) Update the state of the submission weather it was successful or failed. </p>

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00130">130</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a132ad931d52e8b70b6dbd8fd80bd8769"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.DepositJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_deposit_location.html">DepositLocation</a>&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a>&#160;</td>
          <td class="paramname"><em>submission</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1state_1_1_state.html">State</a>&#160;</td>
          <td class="paramname"><em>successState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>runInThread</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct a new one-off deposit job. This will deposit one submission.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">location</td><td>The location where to deposit the submission into. </td></tr>
    <tr><td class="paramname">submission</td><td>The submission to deposit. </td></tr>
    <tr><td class="paramname">successState</td><td>The state submissions should be set to if the deposit is successful. </td></tr>
    <tr><td class="paramname">runInThread</td><td>Normally this job is expected to be run as a background job. However for some circumstances it is better to run the deposit in the same thread. When this is done, errors are re-thrown. This allows the UI to immediatly handle those errors instead of inspecting the submission's action log. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00163">163</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>References <a class="el" href="_deposit_service_impl_8java_source.html#l00048">org.tdl.vireo.export.impl.DepositServiceImpl.context</a>, <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#a8c6e40abd179176f16572dd321676d5e">org.tdl.vireo.security.SecurityContext.getPerson()</a>, <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#ada196b7acfd53ee9097467ab3d8f4446">org.tdl.vireo.security.SecurityContext.isAuthorizationActive()</a>, <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#a4327e4a28fa8325b790db7bdaae52c03">org.tdl.vireo.security.SecurityContext.isReviewer()</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00133">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.location</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00141">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.metadata</a>, <a class="el" href="_job_status_8java_source.html#l00014">org.tdl.vireo.job.JobStatus.READY</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00136">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.runInThread</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00134">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.submission</a>, and <a class="el" href="_deposit_service_impl_8java_source.html#l00135">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.successState</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                                         {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            this.location = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#aa05597ab3df76aaed0c0e8c77c1d3939">location</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            this.submission = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a1cae55310db896b85dd934cbf36647b4">submission</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            this.successState = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a17e35024bc28c083e5e9bd896070e376">successState</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            this.runInThread = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">runInThread</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl.html#aec0edbfe9f52f8ade12e3ecef0ce7bdc">context</a>.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#a8c6e40abd179176f16572dd321676d5e">getPerson</a>() != null) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl.html#aec0edbfe9f52f8ade12e3ecef0ce7bdc">context</a>.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#a4327e4a28fa8325b790db7bdaae52c03">isReviewer</a>())</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> SecurityException(<span class="stringliteral">&quot;Not authorized to preform deposit operation.&quot;</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">runInThread</a> ) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                    this.personId = null;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                    this.ignoreAuthorizations = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    this.personId = context.getPerson().getId();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    this.ignoreAuthorizations = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl.html#aec0edbfe9f52f8ade12e3ecef0ce7bdc">context</a>.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#ada196b7acfd53ee9097467ab3d8f4446">isAuthorizationActive</a>())</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> SecurityException(<span class="stringliteral">&quot;Not authorized to preform deposit operation.&quot;</span>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                this.personId = null;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                this.ignoreAuthorizations = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">runInThread</a>) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a> = jobManager.register(<span class="stringliteral">&quot;Item &quot;</span>+submission.getId()+<span class="stringliteral">&quot; Deposit&quot;</span>, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl.html#aec0edbfe9f52f8ade12e3ecef0ce7bdc">context</a>.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#a8c6e40abd179176f16572dd321676d5e">getPerson</a>());</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                metadata.setJob(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                metadata.getProgress().total = 0;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                metadata.getProgress().completed = 1;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                metadata.setStatus(<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status.html#ae50752266e6d2866eb0819ac2baf81d7">JobStatus.READY</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a> = null;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        }</div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context_html_ada196b7acfd53ee9097467ab3d8f4446"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#ada196b7acfd53ee9097467ab3d8f4446">org.tdl.vireo.security.SecurityContext.isAuthorizationActive</a></div><div class="ttdeci">boolean isAuthorizationActive()</div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status_html_ae50752266e6d2866eb0819ac2baf81d7"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status.html#ae50752266e6d2866eb0819ac2baf81d7">org.tdl.vireo.job.JobStatus.READY</a></div><div class="ttdeci">READY</div><div class="ttdef"><b>Definition:</b> <a href="_job_status_8java_source.html#l00014">JobStatus.java:14</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a1cae55310db896b85dd934cbf36647b4"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a1cae55310db896b85dd934cbf36647b4">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.submission</a></div><div class="ttdeci">final Submission submission</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00134">DepositServiceImpl.java:134</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a84a42316f761fb532791a0b1f555ae43"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.runInThread</a></div><div class="ttdeci">final boolean runInThread</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00136">DepositServiceImpl.java:136</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a17e35024bc28c083e5e9bd896070e376"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a17e35024bc28c083e5e9bd896070e376">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.successState</a></div><div class="ttdeci">final State successState</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00135">DepositServiceImpl.java:135</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_html_aec0edbfe9f52f8ade12e3ecef0ce7bdc"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl.html#aec0edbfe9f52f8ade12e3ecef0ce7bdc">org.tdl.vireo.export.impl.DepositServiceImpl.context</a></div><div class="ttdeci">SecurityContext context</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00048">DepositServiceImpl.java:48</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a5d984fedab46e361b6953def78774e9a"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.metadata</a></div><div class="ttdeci">final JobMetadata metadata</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00141">DepositServiceImpl.java:141</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context_html_a8c6e40abd179176f16572dd321676d5e"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#a8c6e40abd179176f16572dd321676d5e">org.tdl.vireo.security.SecurityContext.getPerson</a></div><div class="ttdeci">Person getPerson()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_aa05597ab3df76aaed0c0e8c77c1d3939"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#aa05597ab3df76aaed0c0e8c77c1d3939">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.location</a></div><div class="ttdeci">final DepositLocation location</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00133">DepositServiceImpl.java:133</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context_html_a4327e4a28fa8325b790db7bdaae52c03"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#a4327e4a28fa8325b790db7bdaae52c03">org.tdl.vireo.security.SecurityContext.isReviewer</a></div><div class="ttdeci">boolean isReviewer()</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_a132ad931d52e8b70b6dbd8fd80bd8769_cgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_a132ad931d52e8b70b6dbd8fd80bd8769_cgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_a132ad931d52e8b70b6dbd8fd80bd8769_cgraph" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_a132ad931d52e8b70b6dbd8fd80bd8769_cgraph">
<area shape="rect" id="node2" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#a8c6e40abd179176f16572dd321676d5e" title="org.tdl.vireo.security.Security\lContext.getPerson" alt="" coords="265,5,457,46"/><area shape="rect" id="node3" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#ada196b7acfd53ee9097467ab3d8f4446" title="org.tdl.vireo.security.Security\lContext.isAuthorizationActive" alt="" coords="264,70,459,111"/><area shape="rect" id="node4" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html#a4327e4a28fa8325b790db7bdaae52c03" title="org.tdl.vireo.security.Security\lContext.isReviewer" alt="" coords="265,135,457,177"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab467c113a6459c595c01c931853ef372"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.depositSubmission </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a>&#160;</td>
          <td class="paramname"><em>submission</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deposit one submission. A package is generated, the depositor is used to deposit the package, and the state is updated. This method catches all runtime exceptions and uses that to update the submission's state accordingly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">submission</td><td>The submission to deposit. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00272">272</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>References <a class="el" href="_deposit_service_impl_8java_source.html#l00133">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.location</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00141">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.metadata</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00136">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.runInThread</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00134">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.submission</a>, and <a class="el" href="_deposit_service_impl_8java_source.html#l00135">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.successState</a>.</p>

<p>Referenced by <a class="el" href="_deposit_service_impl_8java_source.html#l00211">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.doJob()</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                                             {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            ExportPackage exportPackage = null;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                Packager packager = location.getPackager();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                Depositor depositor = location.getDepositor();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                exportPackage = packager.generatePackage(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a1cae55310db896b85dd934cbf36647b4">submission</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                String depositId = depositor.deposit(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#aa05597ab3df76aaed0c0e8c77c1d3939">location</a>, exportPackage);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                ActionLog log = submission.logAction(<span class="stringliteral">&quot;Deposited into repository collection &#39;&quot;</span>+location.getCollection()+<span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                log.save();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="keywordflow">if</span> (depositId != null)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                    submission.setDepositId(depositId);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                    submission.setDepositDate(<span class="keyword">new</span> Date());</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a17e35024bc28c083e5e9bd896070e376">successState</a> != null)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                    submission.setState(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a17e35024bc28c083e5e9bd896070e376">successState</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                submission.save();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                String message = <span class="stringliteral">&quot;Deposited submission #&quot;</span>+submission.getId()+<span class="stringliteral">&quot; into repository: &#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#aa05597ab3df76aaed0c0e8c77c1d3939">location</a>.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_deposit_location.html#a863308510dd7bc99e26ca21774d011e1">getRepository</a>()+<span class="stringliteral">&quot;&#39;, collection: &#39;&quot;</span>+location.getCollection()+<span class="stringliteral">&quot;&#39;, and assigned depositId: &#39;&quot;</span>+depositId+<span class="stringliteral">&quot;&#39;.&quot;</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                Logger.info(message);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a> != null)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                    metadata.setMessage(message);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            } <span class="keywordflow">catch</span> (RuntimeException re) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                Logger.error(re,<span class="stringliteral">&quot;Deposit failed for submission #&quot;</span>+submission.getId());</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                ActionLog log = submission.logAction(<span class="stringliteral">&quot;Deposit failed while attempting to deposit into repository collection &#39;&quot;</span>+location.getCollection()+<span class="stringliteral">&quot;&#39; because of the error &#39;&quot;</span>+re.getMessage()+<span class="stringliteral">&quot;&#39; &quot;</span>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                log.save();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                submission.save();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                errorLog.logError(re, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">runInThread</a>)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                    <span class="keywordflow">throw</span> re;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            } <span class="keywordflow">finally</span> {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keywordflow">if</span> (exportPackage != null)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                    exportPackage.delete();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a1cae55310db896b85dd934cbf36647b4"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a1cae55310db896b85dd934cbf36647b4">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.submission</a></div><div class="ttdeci">final Submission submission</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00134">DepositServiceImpl.java:134</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a84a42316f761fb532791a0b1f555ae43"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.runInThread</a></div><div class="ttdeci">final boolean runInThread</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00136">DepositServiceImpl.java:136</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_deposit_location_html_a863308510dd7bc99e26ca21774d011e1"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_deposit_location.html#a863308510dd7bc99e26ca21774d011e1">org.tdl.vireo.model.DepositLocation.getRepository</a></div><div class="ttdeci">String getRepository()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a17e35024bc28c083e5e9bd896070e376"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a17e35024bc28c083e5e9bd896070e376">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.successState</a></div><div class="ttdeci">final State successState</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00135">DepositServiceImpl.java:135</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a5d984fedab46e361b6953def78774e9a"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.metadata</a></div><div class="ttdeci">final JobMetadata metadata</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00141">DepositServiceImpl.java:141</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_aa05597ab3df76aaed0c0e8c77c1d3939"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#aa05597ab3df76aaed0c0e8c77c1d3939">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.location</a></div><div class="ttdeci">final DepositLocation location</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00133">DepositServiceImpl.java:133</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_ab467c113a6459c595c01c931853ef372_icgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_ab467c113a6459c595c01c931853ef372_icgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_ab467c113a6459c595c01c931853ef372_icgraph" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_ab467c113a6459c595c01c931853ef372_icgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a89543ed8a802de2cea85cb47c76ce8b0" title="org.tdl.vireo.export.impl.\lDepositServiceImpl.DepositJob.doJob" alt="" coords="307,11,552,53"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a89543ed8a802de2cea85cb47c76ce8b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.doJob </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run the back ground job.</p>
<p>There are two cases for batch mode or not. In batch mode we search for the submissions handle that batch, then get the next batch until there are no more submissions left. Alternatively in the single mode the one submission is deposited. </p>

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00211">211</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>References <a class="el" href="_deposit_service_impl_8java_source.html#l00272">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.depositSubmission()</a>, <a class="el" href="_job_status_8java_source.html#l00023">org.tdl.vireo.job.JobStatus.FAILED</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00139">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.ignoreAuthorizations</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00141">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.metadata</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00138">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.personId</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00136">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.runInThread</a>, <a class="el" href="_job_status_8java_source.html#l00017">org.tdl.vireo.job.JobStatus.RUNNING</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00134">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.submission</a>, and <a class="el" href="_job_status_8java_source.html#l00020">org.tdl.vireo.job.JobStatus.SUCCESS</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                            {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a> != null)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    metadata.setStatus(<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status.html#a95b52666ce9a0180c16cc5d05f201b30">JobStatus.RUNNING</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a652a81b83bce81f00e3a149084a022a5">ignoreAuthorizations</a>) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                    context.turnOffAuthorization();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">runInThread</a> &amp;&amp; <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a66f9ae4e69d75e1693571220495055c9">personId</a> != null) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    Person person = personRepo.findPerson(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a66f9ae4e69d75e1693571220495055c9">personId</a>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    <span class="keywordflow">if</span> (person == null)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="stringliteral">&quot;Unable to complete deposit job because person no longer exists.&quot;</span>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                    </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    <span class="comment">// Log the person in for this job.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    context.login(person);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                Submission <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a1cae55310db896b85dd934cbf36647b4">submission</a> = this.submission.merge();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#ab467c113a6459c595c01c931853ef372">depositSubmission</a>(submission);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a> != null) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    metadata.getProgress().completed = 1;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    metadata.setStatus(<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status.html#a48bfb99dc932603eb33e8536921b1397">JobStatus.SUCCESS</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            } <span class="keywordflow">catch</span> (RuntimeException re) {             </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                Logger.fatal(re,<span class="stringliteral">&quot;Unexepcted exception while attempting to deposit items. Aborted.&quot;</span>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a> != null) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    metadata.setMessage(re.toString());</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    metadata.setStatus(<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status.html#a1ad1dc01d3f9a3620e7c7b3a73740b70">JobStatus.FAILED</a>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                errorLog.logError(re, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <span class="keywordflow">throw</span> re;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            } <span class="keywordflow">finally</span> {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <span class="comment">// Clean up the security context</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">runInThread</a> &amp;&amp; <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a66f9ae4e69d75e1693571220495055c9">personId</a> != null) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                    context.logout();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                } </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a652a81b83bce81f00e3a149084a022a5">ignoreAuthorizations</a>) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    context.restoreAuthorization();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">metadata</a> != null)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    metadata.setJob(null);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status_html_a1ad1dc01d3f9a3620e7c7b3a73740b70"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status.html#a1ad1dc01d3f9a3620e7c7b3a73740b70">org.tdl.vireo.job.JobStatus.FAILED</a></div><div class="ttdeci">FAILED</div><div class="ttdef"><b>Definition:</b> <a href="_job_status_8java_source.html#l00023">JobStatus.java:23</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a1cae55310db896b85dd934cbf36647b4"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a1cae55310db896b85dd934cbf36647b4">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.submission</a></div><div class="ttdeci">final Submission submission</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00134">DepositServiceImpl.java:134</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status_html_a48bfb99dc932603eb33e8536921b1397"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status.html#a48bfb99dc932603eb33e8536921b1397">org.tdl.vireo.job.JobStatus.SUCCESS</a></div><div class="ttdeci">SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="_job_status_8java_source.html#l00020">JobStatus.java:20</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a652a81b83bce81f00e3a149084a022a5"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a652a81b83bce81f00e3a149084a022a5">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.ignoreAuthorizations</a></div><div class="ttdeci">final boolean ignoreAuthorizations</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00139">DepositServiceImpl.java:139</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a84a42316f761fb532791a0b1f555ae43"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a84a42316f761fb532791a0b1f555ae43">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.runInThread</a></div><div class="ttdeci">final boolean runInThread</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00136">DepositServiceImpl.java:136</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a66f9ae4e69d75e1693571220495055c9"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a66f9ae4e69d75e1693571220495055c9">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.personId</a></div><div class="ttdeci">final Long personId</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00138">DepositServiceImpl.java:138</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_ab467c113a6459c595c01c931853ef372"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#ab467c113a6459c595c01c931853ef372">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.depositSubmission</a></div><div class="ttdeci">void depositSubmission(Submission submission)</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00272">DepositServiceImpl.java:272</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_html_a5d984fedab46e361b6953def78774e9a"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#a5d984fedab46e361b6953def78774e9a">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.metadata</a></div><div class="ttdeci">final JobMetadata metadata</div><div class="ttdef"><b>Definition:</b> <a href="_deposit_service_impl_8java_source.html#l00141">DepositServiceImpl.java:141</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status_html_a95b52666ce9a0180c16cc5d05f201b30"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1job_1_1_job_status.html#a95b52666ce9a0180c16cc5d05f201b30">org.tdl.vireo.job.JobStatus.RUNNING</a></div><div class="ttdeci">RUNNING</div><div class="ttdef"><b>Definition:</b> <a href="_job_status_8java_source.html#l00017">JobStatus.java:17</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_a89543ed8a802de2cea85cb47c76ce8b0_cgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_a89543ed8a802de2cea85cb47c76ce8b0_cgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_a89543ed8a802de2cea85cb47c76ce8b0_cgraph" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job_a89543ed8a802de2cea85cb47c76ce8b0_cgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html#ab467c113a6459c595c01c931853ef372" title="org.tdl.vireo.export.impl.\lDepositServiceImpl.DepositJob.deposit\lSubmission" alt="" coords="299,4,551,60"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a652a81b83bce81f00e3a149084a022a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final boolean org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.ignoreAuthorizations</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00139">139</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_deposit_service_impl_8java_source.html#l00211">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.doJob()</a>.</p>

</div>
</div>
<a class="anchor" id="aa05597ab3df76aaed0c0e8c77c1d3939"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_deposit_location.html">DepositLocation</a> org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.location</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00133">133</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_deposit_service_impl_8java_source.html#l00163">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.DepositJob()</a>, and <a class="el" href="_deposit_service_impl_8java_source.html#l00272">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.depositSubmission()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d984fedab46e361b6953def78774e9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1job_1_1_job_metadata.html">JobMetadata</a> org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.metadata</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00141">141</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_deposit_service_impl_8java_source.html#l00163">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.DepositJob()</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00272">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.depositSubmission()</a>, and <a class="el" href="_deposit_service_impl_8java_source.html#l00211">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.doJob()</a>.</p>

</div>
</div>
<a class="anchor" id="a66f9ae4e69d75e1693571220495055c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final Long org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.personId</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00138">138</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_deposit_service_impl_8java_source.html#l00211">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.doJob()</a>.</p>

</div>
</div>
<a class="anchor" id="a84a42316f761fb532791a0b1f555ae43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final boolean org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.runInThread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00136">136</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_deposit_service_impl_8java_source.html#l00163">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.DepositJob()</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00272">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.depositSubmission()</a>, and <a class="el" href="_deposit_service_impl_8java_source.html#l00211">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.doJob()</a>.</p>

</div>
</div>
<a class="anchor" id="a1cae55310db896b85dd934cbf36647b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a> org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.submission</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00134">134</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_deposit_service_impl_8java_source.html#l00163">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.DepositJob()</a>, <a class="el" href="_deposit_service_impl_8java_source.html#l00272">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.depositSubmission()</a>, and <a class="el" href="_deposit_service_impl_8java_source.html#l00211">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.doJob()</a>.</p>

</div>
</div>
<a class="anchor" id="a17e35024bc28c083e5e9bd896070e376"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1state_1_1_state.html">State</a> org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.successState</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_deposit_service_impl_8java_source.html#l00135">135</a> of file <a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_deposit_service_impl_8java_source.html#l00163">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.DepositJob()</a>, and <a class="el" href="_deposit_service_impl_8java_source.html#l00272">org.tdl.vireo.export.impl.DepositServiceImpl.DepositJob.depositSubmission()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>app/org/tdl/vireo/export/impl/<a class="el" href="_deposit_service_impl_8java_source.html">DepositServiceImpl.java</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceorg.html">org</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl.html">tdl</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo.html">vireo</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo_1_1export.html">export</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo_1_1export_1_1impl.html">impl</a></li><li class="navelem"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl.html">DepositServiceImpl</a></li><li class="navelem"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_deposit_service_impl_1_1_deposit_job.html">DepositJob</a></li>
    <li class="footer">Generated on Wed Mar 4 2015 13:41:25 for Vireo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
